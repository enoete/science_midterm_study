<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Science Adventure - Complete Study Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #764ba2;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .subtitle {
            text-align: center;
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 30px;
            font-weight: bold;
        }

        /* XP and Progress System */
        .xp-bar-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 15px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .xp-display {
            color: #ffd700;
            font-size: 1.3em;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .xp-bar {
            flex: 1;
            min-width: 200px;
            height: 25px;
            background: #333;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff8c00);
            transition: width 0.5s ease;
            border-radius: 15px;
        }

        .level-badge {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #1a1a2e;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .menu-card:hover {
            transform: scale(1.05) translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .menu-card.story { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
        .menu-card.learn { background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); }
        .menu-card.game { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .menu-card.quiz { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .menu-card.lab { background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); }

        .menu-card h2 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .menu-card p {
            font-size: 1.1em;
            color: #333;
            font-weight: bold;
        }

        .menu-card .card-desc {
            font-size: 0.9em;
            margin-top: 5px;
            opacity: 0.8;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: slideIn 0.5s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        /* Story Section Styles */
        .story-section {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 30px;
            margin: 20px 0;
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border: 4px solid #f5576c;
        }

        .story-title {
            text-align: center;
            color: #764ba2;
            font-size: 2.2em;
            margin-bottom: 20px;
        }

        .story-intro {
            background: white;
            padding: 25px;
            border-radius: 15px;
            font-size: 1.2em;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .story-panel {
            background: white;
            padding: 25px;
            margin: 20px 0;
            border-radius: 15px;
            border: 3px solid #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .story-panel:hover {
            transform: scale(1.02);
        }

        .story-panel h3 {
            color: #f5576c;
            font-size: 1.6em;
            margin-bottom: 15px;
        }

        .story-panel p {
            font-size: 1.15em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .story-character {
            display: inline-block;
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            color: #333;
            margin: 0 3px;
        }

        .story-highlight {
            background: #fff59d;
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .story-callout {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
            font-size: 1.1em;
            font-weight: bold;
        }

        .character-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .character-card:hover {
            transform: translateX(10px);
        }

        .character-emoji {
            font-size: 3em;
            min-width: 60px;
            text-align: center;
        }

        .character-info h4 {
            font-size: 1.4em;
            margin-bottom: 8px;
        }

        .character-info p {
            font-size: 1.05em;
            line-height: 1.6;
        }

        .story-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        /* Flip Cards */
        .flip-card-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .system-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 30px 0 20px 0;
            text-align: center;
            font-size: 1.6em;
            font-weight: bold;
        }

        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 280px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .flip-card-front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .flip-card-back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            transform: rotateY(180deg);
        }

        .flip-card-front h3 {
            font-size: 1.6em;
            margin: 15px 0;
        }

        .flip-card-front .emoji {
            font-size: 3em;
        }

        .flip-card-back p {
            font-size: 1.05em;
            line-height: 1.5;
        }

        .flip-instruction {
            text-align: center;
            font-size: 1.2em;
            color: #667eea;
            margin: 20px 0;
            font-weight: bold;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Memory Game */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 30px auto;
            max-width: 600px;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            color: white;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: white;
            color: #333;
        }

        .memory-card.matched {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
        }

        .game-stats {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        /* Quiz Styles */
        .quiz-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .question-card {
            background: white;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .question-card:hover {
            border-color: #667eea;
        }

        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #333;
            font-weight: bold;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 16px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: 3px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
            font-weight: bold;
        }

        .option:hover {
            transform: translateX(10px);
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .option.correct {
            background: linear-gradient(135deg, #4caf50 0%, #81c784 100%);
            color: white;
        }

        .option.incorrect {
            background: linear-gradient(135deg, #f44336 0%, #e57373 100%);
            color: white;
        }

        .true-false-btn {
            padding: 20px 40px;
            font-size: 1.3em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            font-weight: bold;
        }

        .true-btn {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }

        .false-btn {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .true-false-btn:hover {
            transform: scale(1.1);
        }

        .true-false-btn.selected {
            box-shadow: 0 0 0 5px #764ba2;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 18px 45px;
            font-size: 1.3em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            margin-top: 30px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .score-display {
            text-align: center;
            font-size: 1.8em;
            padding: 40px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        /* Lab Styles */
        .lab-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 30px;
            border-radius: 20px;
            color: white;
        }

        .lab-experiment {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .lab-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .lab-btn {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .lab-btn.heat { background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white; }
        .lab-btn.cool { background: linear-gradient(135deg, #74b9ff, #0984e3); color: white; }
        .lab-btn.reset { background: linear-gradient(135deg, #a29bfe, #6c5ce7); color: white; }

        .lab-btn:hover {
            transform: scale(1.1);
        }

        .molecule-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            min-height: 150px;
            align-items: center;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            margin: 20px 0;
        }

        .molecule {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 50%;
            transition: all 0.5s;
        }

        .molecule.solid {
            margin: 2px;
            animation: vibrate-slow 0.5s infinite;
        }

        .molecule.liquid {
            margin: 5px;
            animation: flow 2s infinite ease-in-out;
        }

        .molecule.gas {
            margin: 15px;
            animation: float 1s infinite ease-in-out;
        }

        @keyframes vibrate-slow {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(1px, 1px); }
        }

        @keyframes flow {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(5px, 3px); }
            50% { transform: translate(-3px, 5px); }
            75% { transform: translate(3px, -3px); }
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(20px, -20px) scale(1.1); }
        }

        .state-label {
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        .temperature-display {
            text-align: center;
            font-size: 3em;
            font-weight: bold;
            color: #ffd700;
            margin: 20px 0;
        }

        /* Heat Transfer Demo Styles */
        .heat-demo-card {
            background: rgba(255,255,255,0.95);
            color: #333;
            cursor: pointer;
            min-height: 320px;
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
        }

        .heat-demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .conduction-visual {
            position: relative;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, #fff 0%, #ffe0b2 100%);
            border-radius: 10px;
            margin: 15px 0;
        }

        .spoon-container {
            position: relative;
        }

        .heat-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ff5722;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .convection-visual {
            position: relative;
            height: 150px;
            background: linear-gradient(180deg, #e3f2fd 0%, #90caf9 100%);
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }

        .convection-particle {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            transition: all 0.5s ease-in-out;
        }

        .radiation-visual {
            position: relative;
            height: 150px;
            background: linear-gradient(180deg, #1a237e 0%, #283593 100%);
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }

        .heat-wave {
            position: absolute;
            color: #ffd700;
            font-size: 1.2em;
            opacity: 0;
        }

        @keyframes wave-move {
            0% { left: 60px; opacity: 1; }
            100% { left: 180px; opacity: 0; }
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .tab-btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, #e0e0e0, #bdbdbd);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 1em;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-btn:hover {
            transform: scale(1.05);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Celebration */
        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            z-index: 1000;
            animation: explode 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes explode {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 1.8em; }
            .container { padding: 15px; }
            .memory-game { grid-template-columns: repeat(3, 1fr); }
            .xp-bar-container { flex-direction: column; text-align: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Science Adventure!</h1>
        <p class="subtitle">Master Science for Your Test - January 22-27!</p>

        <!-- XP Progress Bar -->
        <div class="xp-bar-container">
            <div class="xp-display">XP: <span id="currentXP">0</span></div>
            <div class="xp-bar">
                <div class="xp-fill" id="xpFill" style="width: 0%"></div>
            </div>
            <div class="level-badge">Level <span id="currentLevel">1</span></div>
        </div>

        <!-- Main Menu -->
        <div id="mainMenu" class="section active">
            <div class="main-menu">
                <div class="menu-card story" onclick="showSection('stories')">
                    <h2>üìñ</h2>
                    <p>Story Adventures!</p>
                    <p class="card-desc">Learn with epic tales!</p>
                </div>
                <div class="menu-card learn" onclick="showSection('flipCards')">
                    <h2>üÉè</h2>
                    <p>Flip Card Library!</p>
                    <p class="card-desc">Click to reveal facts!</p>
                </div>
                <div class="menu-card game" onclick="showSection('games')">
                    <h2>üéØ</h2>
                    <p>Memory Games!</p>
                    <p class="card-desc">Match and learn!</p>
                </div>
                <div class="menu-card quiz" onclick="showSection('quiz')">
                    <h2>üìù</h2>
                    <p>Quiz Challenge!</p>
                    <p class="card-desc">Test your knowledge!</p>
                </div>
                <div class="menu-card lab" onclick="showSection('lab')">
                    <h2>üî¨</h2>
                    <p>Virtual Lab!</p>
                    <p class="card-desc">Experiment with matter!</p>
                </div>
            </div>
        </div>


        <!-- Story Adventures Section -->
        <div id="stories" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2.2em; margin-bottom: 20px;">Story Adventures!</h2>

            <div class="tab-nav">
                <button class="tab-btn active" onclick="showStoryTab('bodyCity')">Body City</button>
                <button class="tab-btn" onclick="showStoryTab('digestiveAdventure')">Food Factory</button>
                <button class="tab-btn" onclick="showStoryTab('matterWorld')">Matter World</button>
                <button class="tab-btn" onclick="showStoryTab('atomsWorld')">Tiny Builders</button>
                <button class="tab-btn" onclick="showStoryTab('waterJourney')">Water's Journey</button>
                <button class="tab-btn" onclick="showStoryTab('energyQuest')">Energy Quest</button>
            </div>

            <!-- Body City Story -->
            <div id="bodyCity" class="tab-content active">
                <div class="story-section">
                    <h2 class="story-title">Welcome to Body City!</h2>
                    <div class="story-intro">
                        <p>Imagine your body is a <span class="story-highlight">GIANT CITY</span> with millions of workers! Every second, incredible things are happening to keep you alive. Let's meet the heroes who run this amazing city!</p>
                    </div>

                    <div class="story-panel">
                        <h3>Chapter 1: The Heart - City's Power Station!</h3>
                        <p>In the center of Body City stands the mighty <span class="story-character">Captain Heart</span> - a muscle the size of your fist that NEVER takes a break!</p>
                        <p>Captain Heart pumps <span class="story-highlight">2,000 gallons of blood every day</span> - that's enough to fill a swimming pool! It beats about 100,000 times daily, sending oxygen-rich blood to every corner of the city.</p>
                        <div class="story-callout">
                            Fun Fact: Your heart is made of special CARDIAC muscle - it works automatically without you thinking about it!
                        </div>
                    </div>

                    <div class="story-grid">
                        <div class="character-card" onclick="showCelebration('üöõ')">
                            <div class="character-emoji">üöõ</div>
                            <div class="character-info">
                                <h4>Artie the Artery Truck</h4>
                                <p>Carries fresh oxygen AWAY from the heart to all body parts. Has thick walls to handle high pressure. Remember: <strong>A</strong>rteries = <strong>A</strong>way!</p>
                            </div>
                        </div>
                        <div class="character-card" onclick="showCelebration('üöê')">
                            <div class="character-emoji">üöê</div>
                            <div class="character-info">
                                <h4>Vinny the Vein Van</h4>
                                <p>Brings used blood BACK to the heart. Has special one-way doors (valves) so blood doesn't flow backwards!</p>
                            </div>
                        </div>
                        <div class="character-card" onclick="showCelebration('üõµ')">
                            <div class="character-emoji">üõµ</div>
                            <div class="character-info">
                                <h4>Cappy the Capillary Scooter</h4>
                                <p>Tiny delivery vehicles with super-thin walls! Drops off oxygen and picks up waste at every cell's doorstep.</p>
                            </div>
                        </div>
                    </div>

                    <div class="story-panel">
                        <h3>Chapter 2: The Lungs - City's Air Purifiers!</h3>
                        <p>Meet the <span class="story-character">Lung Twins</span> - two spongy heroes that process <span class="story-highlight">20,000 breaths every day!</span></p>
                        <p>Inside them are 600 million tiny air sacs called <span class="story-character">Alveoli</span> - imagine 600 million tiny balloons! This is where the magic happens: oxygen jumps into your blood, and carbon dioxide jumps out!</p>
                        <p>The <span class="story-character">Diaphragm</span> is the muscle DJ that controls breathing. When it contracts (moves DOWN), air rushes IN. When it relaxes (moves UP), air goes OUT!</p>
                    </div>

                    <div class="story-panel">
                        <h3>Chapter 3: The Skeleton Crew & Muscle Team!</h3>
                        <p>Your <span class="story-highlight">206 bones</span> are like the city's steel framework! They protect important organs and work with muscles to help you move.</p>
                        <div class="story-grid">
                            <div class="character-card" onclick="showCelebration('üí™')">
                                <div class="character-emoji">üí™</div>
                                <div class="character-info">
                                    <h4>Skeletal Muscles (Voluntary)</h4>
                                    <p>YOU control these! Used for running, jumping, and dancing. Connected to bones by TENDONS.</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('‚ù§Ô∏è')">
                                <div class="character-emoji">‚ù§Ô∏è</div>
                                <div class="character-info">
                                    <h4>Cardiac Muscle (Involuntary)</h4>
                                    <p>Only in your heart! Works automatically 24/7 without you thinking about it.</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('üåä')">
                                <div class="character-emoji">üåä</div>
                                <div class="character-info">
                                    <h4>Smooth Muscle (Involuntary)</h4>
                                    <p>Found in organs like stomach and intestines. Pushes food through automatically!</p>
                                </div>
                            </div>
                        </div>
                        <div class="story-callout">
                            Remember: TENDONS connect muscle to bone (T for Tug). LIGAMENTS connect bone to bone (L for Link)!
                        </div>
                    </div>

                    <div class="story-panel">
                        <h3>Chapter 4: The Brain - City's Supercomputer!</h3>
                        <p>The <span class="story-character">Brain Boss</span> runs everything from City Hall! With <span class="story-highlight">86 BILLION neurons</span>, it's the most powerful computer ever made.</p>
                        <p>It sends messages through the <span class="story-character">Spinal Highway</span> (spinal cord) at speeds up to 268 mph! That's faster than a race car!</p>
                        <div class="story-grid">
                            <div class="character-card" onclick="showCelebration('üß†')">
                                <div class="character-emoji">üß†</div>
                                <div class="character-info">
                                    <h4>Cerebrum</h4>
                                    <p>The BIGGEST part! Controls thinking, memory, speech, and voluntary movements. It's wrinkly to fit more brain power!</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('üéØ')">
                                <div class="character-emoji">üéØ</div>
                                <div class="character-info">
                                    <h4>Cerebellum</h4>
                                    <p>The "little brain" at the back! Controls BALANCE and COORDINATION. Helps you walk, dance, and catch a ball!</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('üí°')">
                                <div class="character-emoji">üí°</div>
                                <div class="character-info">
                                    <h4>Brain Stem</h4>
                                    <p>Connects brain to spinal cord. Controls AUTOMATIC functions like breathing, heartbeat, and digestion!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="story-panel">
                        <h3>Chapter 5: The Sensory Scouts!</h3>
                        <p>Your brain needs information about the world! Meet the <span class="story-character">Sensory Scouts</span> - special organs that collect data and send it to the brain!</p>
                        <div class="story-grid">
                            <div class="character-card" onclick="showCelebration('üëÅÔ∏è')">
                                <div class="character-emoji">üëÅÔ∏è</div>
                                <div class="character-info">
                                    <h4>Eyes - Sight</h4>
                                    <p>Detect light and color! Send pictures to the brain through the optic nerve.</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('üëÇ')">
                                <div class="character-emoji">üëÇ</div>
                                <div class="character-info">
                                    <h4>Ears - Hearing</h4>
                                    <p>Detect sound vibrations! Also help with BALANCE through the inner ear.</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('üëÉ')">
                                <div class="character-emoji">üëÉ</div>
                                <div class="character-info">
                                    <h4>Nose - Smell</h4>
                                    <p>Detects chemicals in the air! Can recognize thousands of different smells.</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('üëÖ')">
                                <div class="character-emoji">üëÖ</div>
                                <div class="character-info">
                                    <h4>Tongue - Taste</h4>
                                    <p>Has taste buds for sweet, salty, sour, bitter, and umami (savory)!</p>
                                </div>
                            </div>
                            <div class="character-card" onclick="showCelebration('‚úã')">
                                <div class="character-emoji">‚úã</div>
                                <div class="character-info">
                                    <h4>Skin - Touch</h4>
                                    <p>Your LARGEST organ! Detects pressure, temperature, and pain all over your body.</p>
                                </div>
                            </div>
                        </div>
                        <div class="story-callout">
                            The sensory organs collect information ‚Üí Nerves carry signals to the brain ‚Üí Brain processes and makes decisions ‚Üí Brain sends commands back through nerves!
                        </div>
                    </div>
                </div>
            </div>

            <!-- Digestive System Story (Food Factory) -->
            <div id="digestiveAdventure" class="tab-content">
                <div class="story-section" style="background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);">
                    <h2 class="story-title">Welcome to the Food Factory!</h2>
                    <div class="story-intro">
                        <p>Your digestive system is like an amazing <span class="story-highlight">FOOD FACTORY</span> that turns pizza, apples, and sandwiches into ENERGY your body can use! Let's follow a bite of food on its incredible journey!</p>
                    </div>

                    <div class="story-panel">
                        <h3>Station 1: The Mouth - The Crushing Chamber!</h3>
                        <p>Food enters through the <span class="story-character">Mouth Gate</span> where the <span class="story-highlight">Teeth Team</span> crushes and grinds it into smaller pieces. This is called <strong>MECHANICAL DIGESTION</strong> - physically breaking food apart!</p>
                        <p>Meanwhile, <span class="story-character">Sally Saliva</span> sprays special juices containing <strong>ENZYMES</strong> that start <strong>CHEMICAL DIGESTION</strong> - breaking food down chemically!</p>
                        <div class="story-callout">
                            Fun Fact: You produce about 1-2 liters of saliva every day! That's like 4-8 cups!
                        </div>
                    </div>

                    <div class="story-grid">
                        <div class="character-card" style="background: linear-gradient(135deg, #e17055, #d63031);" onclick="showCelebration('üëÑ')">
                            <div class="character-emoji">üëÑ</div>
                            <div class="character-info">
                                <h4>The Mouth</h4>
                                <p>Where digestion BEGINS! Teeth chew (mechanical), saliva adds enzymes (chemical). Your tongue helps mix and push food back.</p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #fdcb6e, #f39c12);" onclick="showCelebration('üöá')">
                            <div class="character-emoji">üöá</div>
                            <div class="character-info">
                                <h4>The Esophagus</h4>
                                <p>A muscular TUBE that squeezes food down to the stomach. Uses wave-like motions called PERISTALSIS - like squeezing a tube of toothpaste!</p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #00b894, #00cec9);" onclick="showCelebration('ü´ô')">
                            <div class="character-emoji">ü´ô</div>
                            <div class="character-info">
                                <h4>The Stomach</h4>
                                <p>A muscular bag that churns food with powerful ACIDS! Breaks food into a soupy mixture called CHYME. Food stays here 2-4 hours!</p>
                            </div>
                        </div>
                    </div>

                    <div class="story-panel">
                        <h3>Station 2: The Small Intestine - Nutrient Absorption Central!</h3>
                        <p>The <span class="story-character">Small Intestine</span> is actually LONG - about 20 feet! It's called "small" because it's narrow.</p>
                        <p>This is where the MAGIC happens: <span class="story-highlight">NUTRIENTS are absorbed into your bloodstream!</span> Tiny finger-like bumps called <strong>VILLI</strong> increase surface area to grab all those good nutrients.</p>
                        <div class="story-callout">
                            The small intestine is where proteins, carbohydrates, fats, vitamins, and minerals enter your blood to fuel your body!
                        </div>
                    </div>

                    <div class="story-panel">
                        <h3>Station 3: The Large Intestine - Water Recycling Plant!</h3>
                        <p>The <span class="story-character">Large Intestine</span> is shorter but WIDER. Its main job is to <span class="story-highlight">absorb WATER</span> from leftover food.</p>
                        <p>Whatever your body can't use becomes WASTE, which exits through the rectum. The whole journey from mouth to exit takes about 24-72 hours!</p>
                    </div>

                    <div class="story-callout" style="background: linear-gradient(135deg, #74b9ff, #0984e3); color: white;">
                        <strong>Remember the Journey:</strong> Mouth ‚Üí Esophagus ‚Üí Stomach ‚Üí Small Intestine (absorbs nutrients) ‚Üí Large Intestine (absorbs water) ‚Üí Waste exits!
                    </div>
                </div>
            </div>

            <!-- Matter World Story -->
            <div id="matterWorld" class="tab-content">
                <div class="story-section" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                    <h2 class="story-title">The Three States of Matter Kingdom!</h2>
                    <div class="story-intro">
                        <p>In the Matter Kingdom, everything is made of tiny particles called <span class="story-highlight">MOLECULES</span>. These molecules behave differently depending on how much ENERGY they have!</p>
                    </div>

                    <div class="story-grid">
                        <div class="character-card" style="background: linear-gradient(135deg, #74b9ff, #0984e3);" onclick="showCelebration('üßä')">
                            <div class="character-emoji">üßä</div>
                            <div class="character-info">
                                <h4>Solid Sam</h4>
                                <p>Molecules are PACKED TIGHT and barely move - just vibrate in place! Has a DEFINITE SHAPE. Think: ice cubes, rocks, your desk!</p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #81ecec, #00cec9);" onclick="showCelebration('üíß')">
                            <div class="character-emoji">üíß</div>
                            <div class="character-info">
                                <h4>Liquid Lucy</h4>
                                <p>Molecules slide past each other freely! Takes the SHAPE OF CONTAINER but has definite volume. Think: water, juice, milk!</p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #dfe6e9, #b2bec3);" onclick="showCelebration('üí®')">
                            <div class="character-emoji">üí®</div>
                            <div class="character-info">
                                <h4>Gassy Gary</h4>
                                <p>Molecules ZOOM around super fast! NO definite shape or volume - fills ALL available space! Think: air, steam, helium!</p>
                            </div>
                        </div>
                    </div>

                    <div class="story-panel">
                        <h3>The Great Transformation!</h3>
                        <p>When you ADD ENERGY (heat), molecules speed up and spread apart!</p>
                        <p>When you REMOVE ENERGY (cool), molecules slow down and pack together!</p>
                        <div class="story-callout">
                            <strong>State Changes:</strong><br>
                            MELTING: Solid to Liquid (ice to water) - ADD heat!<br>
                            FREEZING: Liquid to Solid (water to ice) - REMOVE heat!<br>
                            EVAPORATION: Liquid to Gas (water to steam) - ADD heat!<br>
                            CONDENSATION: Gas to Liquid (steam to water droplets) - REMOVE heat!
                        </div>
                    </div>
                </div>
            </div>

            <!-- Atoms & Molecules Story (Tiny Builders) -->
            <div id="atomsWorld" class="tab-content">
                <div class="story-section" style="background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%); color: white;">
                    <h2 class="story-title" style="color: white;">The Tiny Builders - Atoms & Molecules!</h2>
                    <div class="story-intro" style="background: rgba(255,255,255,0.9); color: #333;">
                        <p>Everything in the universe - from stars to your fingernails - is made of incredibly tiny building blocks called <span class="story-highlight">ATOMS</span>! Let's zoom in and meet these microscopic heroes!</p>
                    </div>

                    <div class="story-panel" style="background: rgba(255,255,255,0.95); color: #333;">
                        <h3 style="color: #6c5ce7;">What is Matter?</h3>
                        <p><span class="story-highlight">MATTER</span> is anything that has <strong>MASS</strong> (weight) and takes up <strong>SPACE</strong>!</p>
                        <p>Air, water, rocks, trees, YOU - all matter! Even things you can't see (like air) are made of matter because they have mass and take up space.</p>
                        <div class="story-callout">
                            Quick Test: Does it have mass? Does it take up space? If YES to both, it's MATTER!
                        </div>
                    </div>

                    <div class="story-grid">
                        <div class="character-card" style="background: linear-gradient(135deg, #fd79a8, #e84393);" onclick="showCelebration('‚öõÔ∏è')">
                            <div class="character-emoji">‚öõÔ∏è</div>
                            <div class="character-info">
                                <h4>Atoms</h4>
                                <p>The SMALLEST unit of matter! Like tiny LEGO bricks that make up everything. Too small to see - millions fit on a pinhead!</p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #74b9ff, #0984e3);" onclick="showCelebration('üß¨')">
                            <div class="character-emoji">üß¨</div>
                            <div class="character-info">
                                <h4>Molecules</h4>
                                <p>Two or more atoms BONDED together! Like LEGO bricks snapped together to make something new. Water (H‚ÇÇO) = 2 hydrogen + 1 oxygen atom!</p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #00b894, #00cec9);" onclick="showCelebration('üü¢')">
                            <div class="character-emoji">üü¢</div>
                            <div class="character-info">
                                <h4>Elements</h4>
                                <p>Pure substances made of only ONE type of atom. Gold, oxygen, carbon - each is an element! There are about 118 known elements!</p>
                            </div>
                        </div>
                    </div>

                    <div class="story-panel" style="background: rgba(255,255,255,0.95); color: #333;">
                        <h3 style="color: #6c5ce7;">Properties of Matter</h3>
                        <p><strong>Physical Properties</strong> - Things you can OBSERVE without changing what it is:</p>
                        <p>Color, shape, size, texture, state (solid/liquid/gas), smell, hardness, melting point</p>
                        <p><strong>Chemical Properties</strong> - How matter REACTS with other substances:</p>
                        <p>Flammability (can it burn?), reactivity (does it react with acids?), rusting ability</p>
                    </div>

                    <div class="story-panel" style="background: rgba(255,255,255,0.95); color: #333;">
                        <h3 style="color: #6c5ce7;">Recycling - Conserving Matter!</h3>
                        <p>Matter can't be created or destroyed - it just changes form! <span class="story-highlight">RECYCLING</span> helps us reuse matter instead of wasting it.</p>
                        <div class="story-grid">
                            <div class="character-card" style="background: linear-gradient(135deg, #55efc4, #00b894);" onclick="showCelebration('‚ôªÔ∏è')">
                                <div class="character-emoji">‚ôªÔ∏è</div>
                                <div class="character-info">
                                    <h4>Recycling Saves Matter!</h4>
                                    <p>Old paper ‚Üí New paper! Old glass ‚Üí New bottles! Old plastic ‚Üí New products! We're just rearranging atoms!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Water's Journey Story -->
            <div id="waterJourney" class="tab-content">
                <div class="story-section" style="background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); color: white;">
                    <h2 class="story-title" style="color: white;">Wendy Water's Amazing Journey!</h2>
                    <div class="story-intro" style="background: rgba(255,255,255,0.9); color: #333;">
                        <p>Follow <span class="story-character">Wendy Water</span> as she travels around Earth in an endless cycle that's been going on for BILLIONS of years!</p>
                    </div>

                    <div class="story-panel" style="background: rgba(255,255,255,0.95); color: #333;">
                        <h3 style="color: #0984e3;">Stage 1: EVAPORATION - Going Up!</h3>
                        <p>Wendy starts in the ocean, soaking up sunshine. The Sun's energy makes her molecules move faster and faster until... WHOOSH! She transforms into invisible water vapor and floats up into the sky!</p>
                        <p class="story-callout">Plants help too! Through TRANSPIRATION, they release water vapor from their leaves - like millions of tiny fountains!</p>
                    </div>

                    <div class="story-panel" style="background: rgba(255,255,255,0.95); color: #333;">
                        <h3 style="color: #0984e3;">Stage 2: CONDENSATION - Cloud Making!</h3>
                        <p>High in the sky, it's COLD! Wendy loses energy, slows down, and transforms back into tiny liquid droplets. She clings to dust particles with millions of friends to form... CLOUDS!</p>
                    </div>

                    <div class="story-panel" style="background: rgba(255,255,255,0.95); color: #333;">
                        <h3 style="color: #0984e3;">Stage 3: PRECIPITATION - Coming Down!</h3>
                        <p>The cloud gets heavier and heavier as more water joins. Finally, gravity wins and Wendy falls back to Earth as RAIN (or snow, sleet, or hail if it's cold enough)!</p>
                    </div>

                    <div class="story-panel" style="background: rgba(255,255,255,0.95); color: #333;">
                        <h3 style="color: #0984e3;">Stage 4: COLLECTION - Gathering Together!</h3>
                        <p>Wendy lands in oceans, lakes, rivers, or soaks into the ground (groundwater). And then... the Sun comes out again, and her journey starts all over!</p>
                    </div>
                </div>
            </div>

            <!-- Energy Quest Story -->
            <div id="energyQuest" class="tab-content">
                <div class="story-section" style="background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);">
                    <h2 class="story-title">The Heat Transfer Heroes!</h2>
                    <div class="story-intro">
                        <p>Heat energy is always on the move - traveling from HOT things to COLD things! Meet the three ways heat gets around:</p>
                    </div>

                    <div class="story-grid">
                        <div class="character-card" style="background: linear-gradient(135deg, #ee5a24, #ff6b6b);" onclick="showCelebration('üç≥')">
                            <div class="character-emoji">üç≥</div>
                            <div class="character-info">
                                <h4>Connie Conduction</h4>
                                <p>Heat travels through DIRECT TOUCH! Molecules bump into each other like dominoes. Works best in SOLIDS, especially metals!</p>
                                <p><em>Example: A metal spoon gets hot in soup!</em></p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #0984e3, #74b9ff);" onclick="showCelebration('üåä')">
                            <div class="character-emoji">üåä</div>
                            <div class="character-info">
                                <h4>Victor Convection</h4>
                                <p>Heat travels through FLOWING FLUIDS! Hot stuff RISES (less dense), cold stuff SINKS (more dense), creating currents!</p>
                                <p><em>Example: Hot air balloon rises, boiling water swirls!</em></p>
                            </div>
                        </div>
                        <div class="character-card" style="background: linear-gradient(135deg, #feca57, #ff9f43);" onclick="showCelebration('‚òÄÔ∏è')">
                            <div class="character-emoji">‚òÄÔ∏è</div>
                            <div class="character-info">
                                <h4>Ray Radiation</h4>
                                <p>Heat travels through EMPTY SPACE as waves! No touching needed - works even in a vacuum!</p>
                                <p><em>Example: Sun warming Earth, feeling heat from a campfire!</em></p>
                            </div>
                        </div>
                    </div>

                    <div class="story-callout">
                        <strong>Remember:</strong> Heat ALWAYS flows from HOT to COLD! Insulators (like wool, plastic, air) SLOW DOWN heat transfer. Conductors (like metal) SPEED UP heat transfer!
                    </div>
                </div>
            </div>
        </div>


        <!-- Flip Cards Section -->
        <div id="flipCards" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2.2em; margin-bottom: 20px;">Flip Card Library!</h2>
            <p class="flip-instruction">Click any card to flip and reveal the answer!</p>

            <div class="tab-nav">
                <button class="tab-btn active" onclick="showFlipTab('circCards')">Circulatory</button>
                <button class="tab-btn" onclick="showFlipTab('respCards')">Respiratory</button>
                <button class="tab-btn" onclick="showFlipTab('digestCards')">Digestive</button>
                <button class="tab-btn" onclick="showFlipTab('skelCards')">Skeletal</button>
                <button class="tab-btn" onclick="showFlipTab('muscCards')">Muscular</button>
                <button class="tab-btn" onclick="showFlipTab('nervCards')">Nervous</button>
                <button class="tab-btn" onclick="showFlipTab('matterCards')">Matter</button>
                <button class="tab-btn" onclick="showFlipTab('atomsCards')">Atoms</button>
                <button class="tab-btn" onclick="showFlipTab('energyCards')">Energy</button>
            </div>

            <!-- Circulatory Cards -->
            <div id="circCards" class="tab-content active">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">‚ù§Ô∏è</div>
                                <h3>Heart</h3>
                                <p>What does it do?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>The body's pump!</strong></p>
                                <p>Made of CARDIAC muscle. Pumps blood 24/7. Beats ~100,000 times/day!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üöõ</div>
                                <h3>Arteries</h3>
                                <p>Which way do they go?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>AWAY from heart!</strong></p>
                                <p>Carry oxygen-rich blood. Thick walls for high pressure. A = Away!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üöê</div>
                                <h3>Veins</h3>
                                <p>What's special about them?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Back to heart!</strong></p>
                                <p>Have VALVES to prevent backflow. Carry blood with less oxygen.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üõµ</div>
                                <h3>Capillaries</h3>
                                <p>Why are they important?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Tiny exchange vessels!</strong></p>
                                <p>Super thin walls allow O2 and nutrients to pass to cells, CO2 to leave.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Respiratory Cards -->
            <div id="respCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">ü´Å</div>
                                <h3>Lungs</h3>
                                <p>What happens here?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Gas exchange!</strong></p>
                                <p>O2 enters blood, CO2 leaves. Contains 600 million alveoli!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üéà</div>
                                <h3>Alveoli</h3>
                                <p>What are they?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Tiny air sacs!</strong></p>
                                <p>Where O2 and CO2 are exchanged. Thin walls, surrounded by capillaries.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üí™</div>
                                <h3>Diaphragm</h3>
                                <p>How does it work?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Main breathing muscle!</strong></p>
                                <p>Contracts (DOWN) = inhale. Relaxes (UP) = exhale.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Digestive Cards -->
            <div id="digestCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üëÑ</div>
                                <h3>Mouth</h3>
                                <p>What happens here?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Digestion STARTS here!</strong></p>
                                <p>Teeth chew (mechanical), saliva has enzymes (chemical). Tongue pushes food back.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üöá</div>
                                <h3>Esophagus</h3>
                                <p>What does it do?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Food tube to stomach!</strong></p>
                                <p>Uses PERISTALSIS - wave-like muscle contractions to push food down.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">ü´ô</div>
                                <h3>Stomach</h3>
                                <p>What happens here?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Churns food with acid!</strong></p>
                                <p>Breaks food into CHYME (soupy mixture). Food stays 2-4 hours.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üåÄ</div>
                                <h3>Small Intestine</h3>
                                <p>Why is it important?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Absorbs NUTRIENTS!</strong></p>
                                <p>20 feet long! Villi (tiny bumps) absorb nutrients into blood.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üíß</div>
                                <h3>Large Intestine</h3>
                                <p>What does it do?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Absorbs WATER!</strong></p>
                                <p>Shorter but wider. Forms waste from leftover material.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Skeletal Cards -->
            <div id="skelCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">ü¶¥</div>
                                <h3>Bones</h3>
                                <p>How many do you have?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>206 bones!</strong></p>
                                <p>Support body, protect organs, make blood cells, store minerals.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üîó</div>
                                <h3>Ligaments</h3>
                                <p>What do they connect?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Bone to Bone!</strong></p>
                                <p>L = Link bones together. Hold joints stable.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üéØ</div>
                                <h3>Tendons</h3>
                                <p>What do they connect?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Muscle to Bone!</strong></p>
                                <p>T = Tug on bones when muscles contract.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">ü¶¥</div>
                                <h3>Joints</h3>
                                <p>What are they?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Where bones meet!</strong></p>
                                <p>Allow movement. Types: hinge (elbow), ball-and-socket (shoulder), pivot (neck).</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">ü´ß</div>
                                <h3>Cartilage</h3>
                                <p>What does it do?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Cushions joints!</strong></p>
                                <p>Flexible tissue that prevents bones from rubbing together.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Muscular Cards -->
            <div id="muscCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üí™</div>
                                <h3>Skeletal Muscle</h3>
                                <p>Can you control it?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>YES - Voluntary!</strong></p>
                                <p>You decide to move. Attached to bones. Used for movement.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">‚ù§Ô∏è</div>
                                <h3>Cardiac Muscle</h3>
                                <p>Where is it found?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Only in the heart!</strong></p>
                                <p>Involuntary - works automatically. Never gets tired!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üåä</div>
                                <h3>Smooth Muscle</h3>
                                <p>Where is it found?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>In organs!</strong></p>
                                <p>Involuntary. Found in stomach, intestines, blood vessels. Pushes food!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nervous Cards -->
            <div id="nervCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üß†</div>
                                <h3>Brain</h3>
                                <p>How many neurons?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>86 BILLION neurons!</strong></p>
                                <p>Control center. Processes info, stores memories, controls body.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üí°</div>
                                <h3>Cerebrum</h3>
                                <p>What does it control?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Thinking & voluntary movement!</strong></p>
                                <p>Largest brain part. Controls memory, speech, senses, decisions.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üéØ</div>
                                <h3>Cerebellum</h3>
                                <p>What does it control?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Balance & coordination!</strong></p>
                                <p>"Little brain" at back. Helps you walk, dance, catch balls!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">‚ù§Ô∏è</div>
                                <h3>Brain Stem</h3>
                                <p>What does it control?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Automatic functions!</strong></p>
                                <p>Controls breathing, heartbeat, digestion - things you don't think about!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üõ§Ô∏è</div>
                                <h3>Spinal Cord</h3>
                                <p>What does it do?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Information highway!</strong></p>
                                <p>Connects brain to body. Carries messages up to 268 mph!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üëÅÔ∏èüëÇüëÉüëÖ‚úã</div>
                                <h3>Sensory Organs</h3>
                                <p>What do they do?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Collect information!</strong></p>
                                <p>Eyes (sight), Ears (hearing), Nose (smell), Tongue (taste), Skin (touch)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Matter Cards -->
            <div id="matterCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üßä</div>
                                <h3>Solid</h3>
                                <p>What's it like?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Definite shape & volume!</strong></p>
                                <p>Particles packed tight, vibrate in place. Low energy.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üíß</div>
                                <h3>Liquid</h3>
                                <p>What's it like?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Takes container shape!</strong></p>
                                <p>Definite volume. Particles slide past each other. Medium energy.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üí®</div>
                                <h3>Gas</h3>
                                <p>What's it like?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Fills all space!</strong></p>
                                <p>No definite shape or volume. Particles zoom around. High energy!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üîÑ</div>
                                <h3>State Changes</h3>
                                <p>What causes them?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Adding or removing ENERGY!</strong></p>
                                <p>Heat = particles speed up & spread. Cool = slow down & pack together.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Atoms & Molecules Cards -->
            <div id="atomsCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">‚ùì</div>
                                <h3>What is Matter?</h3>
                                <p>Define it!</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Has MASS + Takes up SPACE!</strong></p>
                                <p>Anything with mass and volume is matter. Air, water, rocks, YOU!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">‚öõÔ∏è</div>
                                <h3>Atoms</h3>
                                <p>What are they?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Smallest unit of matter!</strong></p>
                                <p>Like tiny LEGO bricks. Too small to see - millions fit on a pinhead!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üß¨</div>
                                <h3>Molecules</h3>
                                <p>What are they?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>2+ atoms bonded together!</strong></p>
                                <p>Water = H‚ÇÇO (2 hydrogen + 1 oxygen). Like LEGO bricks snapped together!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üëÅÔ∏è</div>
                                <h3>Physical Properties</h3>
                                <p>What are they?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Observable characteristics!</strong></p>
                                <p>Color, shape, size, texture, state, smell - things you can see/measure.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üî•</div>
                                <h3>Chemical Properties</h3>
                                <p>What are they?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>How matter REACTS!</strong></p>
                                <p>Flammability, reactivity with acids, rusting - how it changes chemically.</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">‚ôªÔ∏è</div>
                                <h3>Recycling</h3>
                                <p>How does it help?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Conserves matter!</strong></p>
                                <p>Old materials ‚Üí New products. Paper, glass, plastic can all be recycled!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Energy Cards -->
            <div id="energyCards" class="tab-content">
                <div class="flip-card-container">
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üç≥</div>
                                <h3>Conduction</h3>
                                <p>How does it work?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Direct contact!</strong></p>
                                <p>Molecules bump into each other. Best in solids, especially metals!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">üåä</div>
                                <h3>Convection</h3>
                                <p>How does it work?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Flowing fluids!</strong></p>
                                <p>Hot rises (less dense), cold sinks (more dense). Creates currents!</p>
                            </div>
                        </div>
                    </div>
                    <div class="flip-card" onclick="flipCard(this)">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="emoji">‚òÄÔ∏è</div>
                                <h3>Radiation</h3>
                                <p>How does it work?</p>
                            </div>
                            <div class="flip-card-back">
                                <p><strong>Through empty space!</strong></p>
                                <p>Heat travels as waves. No contact needed. How Sun warms Earth!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Memory Games Section -->
        <div id="games" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2.2em; margin-bottom: 20px;">Memory Games!</h2>

            <div class="tab-nav">
                <button class="tab-btn active" onclick="showGameTab('memoryGame')">Match Cards</button>
                <button class="tab-btn" onclick="showGameTab('sortingGame')">Sort It!</button>
                <button class="tab-btn" onclick="showGameTab('speedRound')">Speed Round</button>
            </div>

            <!-- Memory Match Game -->
            <div id="memoryGame" class="tab-content active">
                <div style="text-align: center; margin-bottom: 20px;">
                    <p style="font-size: 1.2em; color: #667eea; font-weight: bold;">Match the body parts with their functions!</p>
                    <select id="memoryTopic" onchange="initMemoryGame()" style="padding: 10px 20px; font-size: 1.1em; border-radius: 10px; border: 2px solid #667eea; margin: 10px;">
                        <option value="circulatory">Circulatory System</option>
                        <option value="respiratory">Respiratory System</option>
                        <option value="digestive">Digestive System</option>
                        <option value="nervous">Nervous System</option>
                        <option value="matter">States of Matter</option>
                        <option value="atoms">Atoms & Molecules</option>
                        <option value="energy">Heat Transfer</option>
                    </select>
                </div>
                <div class="game-stats">
                    <span>Moves: <span id="moveCount">0</span></span> | 
                    <span>Matches: <span id="matchCount">0</span>/<span id="totalPairs">6</span></span> |
                    <span>Best: <span id="bestScore">-</span></span>
                </div>
                <div class="memory-game" id="memoryBoard"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="submit-btn" onclick="initMemoryGame()">New Game</button>
                </div>
            </div>

            <!-- Sorting Game -->
            <div id="sortingGame" class="tab-content">
                <div style="text-align: center; margin-bottom: 20px;">
                    <p style="font-size: 1.2em; color: #667eea; font-weight: bold;">Drag items to the correct category!</p>
                </div>
                <div id="sortingArea">
                    <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-bottom: 30px;" id="sortItems"></div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;" id="dropZones"></div>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="submit-btn" onclick="checkSorting()">Check Answers</button>
                    <button class="submit-btn" onclick="initSortingGame()" style="background: linear-gradient(135deg, #a29bfe, #6c5ce7);">New Game</button>
                </div>
            </div>

            <!-- Speed Round -->
            <div id="speedRound" class="tab-content">
                <div style="text-align: center;">
                    <p style="font-size: 1.2em; color: #667eea; font-weight: bold;">Answer as fast as you can!</p>
                    <div id="speedTimer" style="font-size: 3em; color: #f5576c; font-weight: bold; margin: 20px 0;">30</div>
                    <div id="speedScore" style="font-size: 1.5em; color: #667eea; margin: 10px 0;">Score: 0</div>
                    <div id="speedQuestion" style="font-size: 1.4em; padding: 30px; background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); border-radius: 15px; margin: 20px 0;"></div>
                    <div id="speedOptions" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; max-width: 600px; margin: 0 auto;"></div>
                    <button class="submit-btn" onclick="startSpeedRound()" id="speedStartBtn">Start Speed Round!</button>
                </div>
            </div>
        </div>

        <!-- Quiz Section -->
        <div id="quiz" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2.2em; margin-bottom: 20px;">Quiz Challenge!</h2>

            <div class="progress-bar">
                <div class="progress-fill" id="quizProgress" style="width: 0%">0%</div>
            </div>

            <div class="quiz-container" id="quizContainer"></div>

            <div style="text-align: center;">
                <button class="submit-btn" onclick="submitQuiz()">Submit Quiz!</button>
            </div>

            <div id="quizResults" style="display: none;"></div>
        </div>


        <!-- Virtual Lab Section -->
        <div id="lab" class="section">
            <button class="back-btn" onclick="showSection('mainMenu')">Back to Menu</button>
            <h2 style="text-align: center; color: #764ba2; font-size: 2.2em; margin-bottom: 20px;">Virtual Lab!</h2>

            <div class="tab-nav">
                <button class="tab-btn active" onclick="showLabTab('matterLab')">Matter States</button>
                <button class="tab-btn" onclick="showLabTab('waterCycleLab')">Water Cycle</button>
                <button class="tab-btn" onclick="showLabTab('heatLab')">Heat Transfer</button>
            </div>

            <!-- Matter States Lab -->
            <div id="matterLab" class="tab-content active">
                <div class="lab-container">
                    <h3 style="text-align: center; font-size: 1.8em; margin-bottom: 20px;">Matter State Simulator</h3>
                    <p style="text-align: center; margin-bottom: 20px;">Watch how molecules behave in different states! Add or remove heat to change states!</p>
                    
                    <div class="temperature-display">
                        <span id="tempValue">25</span> C
                    </div>
                    
                    <div class="state-label" id="stateLabel">LIQUID (Water)</div>
                    
                    <div class="molecule-display" id="moleculeDisplay"></div>
                    
                    <div class="lab-controls">
                        <button class="lab-btn heat" onclick="changeTemp(10)">Add Heat (+10 C)</button>
                        <button class="lab-btn cool" onclick="changeTemp(-10)">Remove Heat (-10 C)</button>
                        <button class="lab-btn reset" onclick="resetLab()">Reset</button>
                    </div>
                    
                    <div class="lab-experiment" style="margin-top: 20px;">
                        <h4 style="margin-bottom: 15px;">What's Happening?</h4>
                        <p id="labExplanation">At 25 C, water is a liquid. Molecules are close together but can slide past each other. They have moderate energy and move freely within the container.</p>
                    </div>
                </div>
            </div>

            <!-- Water Cycle Lab -->
            <div id="waterCycleLab" class="tab-content">
                <div class="lab-container" style="background: linear-gradient(135deg, #74b9ff, #0984e3);">
                    <h3 style="text-align: center; font-size: 1.8em; margin-bottom: 20px;">Interactive Water Cycle</h3>
                    <p style="text-align: center; margin-bottom: 20px;">Click on each stage to learn more!</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
                        <div class="lab-experiment" style="background: rgba(255,255,255,0.9); color: #333; cursor: pointer; text-align: center;" onclick="showWaterInfo('evaporation')">
                            <div style="font-size: 3em;">&#9728;</div>
                            <h4 style="color: #f39c12;">Evaporation</h4>
                            <p>Sun heats water, turns to vapor</p>
                        </div>
                        <div class="lab-experiment" style="background: rgba(255,255,255,0.9); color: #333; cursor: pointer; text-align: center;" onclick="showWaterInfo('condensation')">
                            <div style="font-size: 3em;">&#9729;</div>
                            <h4 style="color: #3498db;">Condensation</h4>
                            <p>Vapor cools, forms clouds</p>
                        </div>
                        <div class="lab-experiment" style="background: rgba(255,255,255,0.9); color: #333; cursor: pointer; text-align: center;" onclick="showWaterInfo('precipitation')">
                            <div style="font-size: 3em;">&#127783;</div>
                            <h4 style="color: #2980b9;">Precipitation</h4>
                            <p>Water falls as rain/snow</p>
                        </div>
                        <div class="lab-experiment" style="background: rgba(255,255,255,0.9); color: #333; cursor: pointer; text-align: center;" onclick="showWaterInfo('collection')">
                            <div style="font-size: 3em;">&#127754;</div>
                            <h4 style="color: #1abc9c;">Collection</h4>
                            <p>Water gathers in bodies</p>
                        </div>
                    </div>
                    
                    <div class="lab-experiment" id="waterInfo" style="margin-top: 20px; background: rgba(255,255,255,0.9); color: #333;">
                        <h4 style="margin-bottom: 15px; color: #667eea;">Click on any stage to learn more!</h4>
                        <p>The water cycle is a continuous process that moves water around Earth. Click on each stage above to explore!</p>
                    </div>
                </div>
            </div>

            <!-- Heat Transfer Lab - IMPROVED VERSION -->
            <div id="heatLab" class="tab-content">
                <div class="lab-container" style="background: linear-gradient(135deg, #2c3e50, #1a1a2e);">
                    <h3 style="text-align: center; font-size: 1.8em; margin-bottom: 20px;">Heat Transfer Simulator</h3>
                    <p style="text-align: center; margin-bottom: 20px;">Click each card to see an animated demonstration!</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                        
                        <!-- CONDUCTION Demo Card -->
                        <div class="heat-demo-card" onclick="runConductionDemo()">
                            <h4 style="color: #ee5a24; text-align: center; font-size: 1.4em;">CONDUCTION</h4>
                            <div id="conductionVisual" class="conduction-visual">
                                <div style="font-size: 3em; position: relative;">
                                    <span id="soupBowl">&#127836;</span>
                                    <span id="conductionSpoon" style="position: absolute; top: -15px; right: -30px; font-size: 0.8em; transition: all 0.3s;">&#129348;</span>
                                </div>
                                <div id="conductionHeatDots" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);"></div>
                            </div>
                            <p style="text-align: center; font-size: 0.95em; margin: 10px 0;">Heat transfers through <strong>DIRECT TOUCH</strong>. Molecules bump into each other like dominoes!</p>
                            <div id="conductionStatus" style="text-align: center; font-weight: bold; color: #667eea; padding: 10px; background: #f0f0f0; border-radius: 8px;">Click to start demo!</div>
                        </div>
                        
                        <!-- CONVECTION Demo Card -->
                        <div class="heat-demo-card" onclick="runConvectionDemo()">
                            <h4 style="color: #0984e3; text-align: center; font-size: 1.4em;">CONVECTION</h4>
                            <div id="convectionVisual" class="convection-visual">
                                <div style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 100px; height: 60px; background: #555; border-radius: 0 0 15px 15px;"></div>
                                <div id="convectionFlame" style="position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%); font-size: 1.5em; opacity: 0.3;">&#128293;</div>
                                <div id="convectionParticles"></div>
                                <div id="convectionArrowUp" style="position: absolute; top: 20px; left: 35%; color: #e74c3c; font-size: 1.5em; opacity: 0;">&#8593; HOT</div>
                                <div id="convectionArrowDown" style="position: absolute; top: 20px; right: 35%; color: #3498db; font-size: 1.5em; opacity: 0;">&#8595; COLD</div>
                            </div>
                            <p style="text-align: center; font-size: 0.95em; margin: 10px 0;">Hot fluid <strong>RISES</strong> (less dense), cold fluid <strong>SINKS</strong> (more dense)!</p>
                            <div id="convectionStatus" style="text-align: center; font-weight: bold; color: #667eea; padding: 10px; background: #f0f0f0; border-radius: 8px;">Click to start demo!</div>
                        </div>
                        
                        <!-- RADIATION Demo Card -->
                        <div class="heat-demo-card" onclick="runRadiationDemo()">
                            <h4 style="color: #f39c12; text-align: center; font-size: 1.4em;">RADIATION</h4>
                            <div id="radiationVisual" class="radiation-visual">
                                <div id="radiationSun" style="position: absolute; top: 20px; left: 20px; font-size: 2.5em; transition: all 0.3s;">&#9728;</div>
                                <div id="radiationWavesContainer" style="position: absolute; top: 35px; left: 70px; width: 120px; height: 30px;"></div>
                                <div id="radiationPerson" style="position: absolute; bottom: 30px; right: 25px; font-size: 2em; transition: all 0.3s;">&#129485;</div>
                                <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 25px; background: linear-gradient(180deg, #27ae60, #1e8449);"></div>
                            </div>
                            <p style="text-align: center; font-size: 0.95em; margin: 10px 0;">Heat travels through <strong>EMPTY SPACE</strong> as invisible waves!</p>
                            <div id="radiationStatus" style="text-align: center; font-weight: bold; color: #667eea; padding: 10px; background: #f0f0f0; border-radius: 8px;">Click to start demo!</div>
                        </div>
                    </div>
                    
                    <div class="lab-experiment" id="heatInfo" style="margin-top: 20px; background: rgba(255,255,255,0.95); color: #333;">
                        <h4 style="margin-bottom: 15px; color: #667eea;">Heat Transfer Explanation</h4>
                        <p id="heatExplanation">Click on any heat transfer card above to see an animated demonstration! Each type of heat transfer works differently - watch closely to see how heat energy moves from hot to cold!</p>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <script>
        // XP System
        let totalXP = 0;
        let currentLevel = 1;
        const xpPerLevel = 100;

        function addXP(amount) {
            totalXP += amount;
            document.getElementById('currentXP').textContent = totalXP;
            
            const newLevel = Math.floor(totalXP / xpPerLevel) + 1;
            if (newLevel > currentLevel) {
                currentLevel = newLevel;
                document.getElementById('currentLevel').textContent = currentLevel;
                showCelebration('LEVEL UP!');
            }
            
            const progressPercent = (totalXP % xpPerLevel);
            document.getElementById('xpFill').style.width = progressPercent + '%';
        }

        // Section Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            if (sectionId === 'games') {
                initMemoryGame();
                initSortingGame();
            }
            if (sectionId === 'quiz') {
                initQuiz();
            }
            if (sectionId === 'lab') {
                initMatterLab();
            }
        }

        // Tab Navigation
        function showStoryTab(tabId) {
            document.querySelectorAll('#stories .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('#stories .tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }

        function showFlipTab(tabId) {
            document.querySelectorAll('#flipCards .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('#flipCards .tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }

        function showGameTab(tabId) {
            document.querySelectorAll('#games .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('#games .tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tabId === 'sortingGame') initSortingGame();
        }

        function showLabTab(tabId) {
            document.querySelectorAll('#lab .tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('#lab .tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tabId === 'matterLab') initMatterLab();
            if (tabId === 'heatLab') resetHeatDemos();
        }

        // Flip Cards
        function flipCard(card) {
            card.classList.toggle('flipped');
            if (card.classList.contains('flipped')) {
                addXP(2);
                showCelebration('Nice!');
            }
        }

        // Celebration Effect
        function showCelebration(text) {
            const celebration = document.createElement('div');
            celebration.className = 'celebration';
            celebration.textContent = text;
            document.body.appendChild(celebration);
            setTimeout(() => celebration.remove(), 1000);
        }

        // Memory Game
        const memoryData = {
            circulatory: [
                { term: 'Heart', match: 'Pumps blood' },
                { term: 'Arteries', match: 'Away from heart' },
                { term: 'Veins', match: 'Back to heart' },
                { term: 'Capillaries', match: 'Tiny vessels' },
                { term: 'Blood', match: 'Carries oxygen' },
                { term: 'Cardiac', match: 'Heart muscle' }
            ],
            respiratory: [
                { term: 'Lungs', match: 'Gas exchange' },
                { term: 'Diaphragm', match: 'Breathing muscle' },
                { term: 'Alveoli', match: 'Air sacs' },
                { term: 'Trachea', match: 'Windpipe' },
                { term: 'Nose', match: 'Filters air' },
                { term: 'Bronchi', match: 'Lung branches' }
            ],
            matter: [
                { term: 'Solid', match: 'Fixed shape' },
                { term: 'Liquid', match: 'Takes container shape' },
                { term: 'Gas', match: 'Fills all space' },
                { term: 'Melting', match: 'Solid to liquid' },
                { term: 'Freezing', match: 'Liquid to solid' },
                { term: 'Evaporation', match: 'Liquid to gas' }
            ],
            energy: [
                { term: 'Conduction', match: 'Direct touch' },
                { term: 'Convection', match: 'Flowing fluids' },
                { term: 'Radiation', match: 'Through space' },
                { term: 'Insulator', match: 'Slows heat' },
                { term: 'Conductor', match: 'Transfers heat' },
                { term: 'Temperature', match: 'Heat measure' }
            ],
            digestive: [
                { term: 'Mouth', match: 'Starts digestion' },
                { term: 'Esophagus', match: 'Food tube' },
                { term: 'Stomach', match: 'Churns with acid' },
                { term: 'Small Intestine', match: 'Absorbs nutrients' },
                { term: 'Large Intestine', match: 'Absorbs water' },
                { term: 'Enzymes', match: 'Chemical digestion' }
            ],
            nervous: [
                { term: 'Brain', match: 'Control center' },
                { term: 'Cerebrum', match: 'Thinking part' },
                { term: 'Cerebellum', match: 'Balance control' },
                { term: 'Brain Stem', match: 'Automatic functions' },
                { term: 'Spinal Cord', match: 'Message highway' },
                { term: 'Nerves', match: 'Carry signals' }
            ],
            atoms: [
                { term: 'Matter', match: 'Has mass & space' },
                { term: 'Atoms', match: 'Smallest unit' },
                { term: 'Molecules', match: 'Bonded atoms' },
                { term: 'Physical Property', match: 'Observable trait' },
                { term: 'Chemical Property', match: 'How it reacts' },
                { term: 'Recycling', match: 'Conserves matter' }
            ]
        };

        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;
        let bestScores = {};

        function initMemoryGame() {
            const topic = document.getElementById('memoryTopic').value;
            const data = memoryData[topic];
            const board = document.getElementById('memoryBoard');
            board.innerHTML = '';
            
            flippedCards = [];
            matchedPairs = 0;
            moves = 0;
            document.getElementById('moveCount').textContent = 0;
            document.getElementById('matchCount').textContent = 0;
            document.getElementById('totalPairs').textContent = data.length;
            
            if (bestScores[topic]) {
                document.getElementById('bestScore').textContent = bestScores[topic];
            } else {
                document.getElementById('bestScore').textContent = '-';
            }
            
            let cards = [];
            data.forEach((item, index) => {
                cards.push({ text: item.term, pairId: index, type: 'term' });
                cards.push({ text: item.match, pairId: index, type: 'match' });
            });
            
            cards.sort(() => Math.random() - 0.5);
            
            cards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'memory-card';
                cardEl.dataset.pairId = card.pairId;
                cardEl.dataset.index = index;
                cardEl.textContent = '?';
                cardEl.dataset.content = card.text;
                cardEl.onclick = () => flipMemoryCard(cardEl);
                board.appendChild(cardEl);
            });
        }

        function flipMemoryCard(card) {
            if (card.classList.contains('flipped') || card.classList.contains('matched') || flippedCards.length >= 2) return;
            
            card.classList.add('flipped');
            card.textContent = card.dataset.content;
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                moves++;
                document.getElementById('moveCount').textContent = moves;
                
                const [card1, card2] = flippedCards;
                
                if (card1.dataset.pairId === card2.dataset.pairId) {
                    setTimeout(() => {
                        card1.classList.add('matched');
                        card2.classList.add('matched');
                        matchedPairs++;
                        document.getElementById('matchCount').textContent = matchedPairs;
                        addXP(10);
                        showCelebration('Match!');
                        
                        const topic = document.getElementById('memoryTopic').value;
                        if (matchedPairs === memoryData[topic].length) {
                            if (!bestScores[topic] || moves < bestScores[topic]) {
                                bestScores[topic] = moves;
                                document.getElementById('bestScore').textContent = moves;
                            }
                            addXP(50);
                            setTimeout(() => {
                                showCelebration('WINNER!');
                                alert('Amazing! You completed the game in ' + moves + ' moves!');
                            }, 500);
                        }
                        
                        flippedCards = [];
                    }, 500);
                } else {
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        card1.textContent = '?';
                        card2.textContent = '?';
                        flippedCards = [];
                    }, 1000);
                }
            }
        }

        // Sorting Game
        const sortingData = {
            muscleTypes: {
                zones: ['Voluntary (You Control)', 'Involuntary (Automatic)'],
                items: [
                    { text: 'Skeletal Muscle', zone: 'Voluntary (You Control)' },
                    { text: 'Arm Muscles', zone: 'Voluntary (You Control)' },
                    { text: 'Face Muscles', zone: 'Voluntary (You Control)' },
                    { text: 'Cardiac Muscle', zone: 'Involuntary (Automatic)' },
                    { text: 'Smooth Muscle', zone: 'Involuntary (Automatic)' },
                    { text: 'Stomach Muscles', zone: 'Involuntary (Automatic)' }
                ]
            },
            bloodVessels: {
                zones: ['Away from Heart', 'Back to Heart'],
                items: [
                    { text: 'Arteries', zone: 'Away from Heart' },
                    { text: 'Oxygen-rich blood', zone: 'Away from Heart' },
                    { text: 'Thick walls', zone: 'Away from Heart' },
                    { text: 'Veins', zone: 'Back to Heart' },
                    { text: 'Low-oxygen blood', zone: 'Back to Heart' },
                    { text: 'Has valves', zone: 'Back to Heart' }
                ]
            },
            stateChanges: {
                zones: ['Adds Energy (Heating)', 'Removes Energy (Cooling)'],
                items: [
                    { text: 'Melting', zone: 'Adds Energy (Heating)' },
                    { text: 'Evaporation', zone: 'Adds Energy (Heating)' },
                    { text: 'Sublimation', zone: 'Adds Energy (Heating)' },
                    { text: 'Freezing', zone: 'Removes Energy (Cooling)' },
                    { text: 'Condensation', zone: 'Removes Energy (Cooling)' },
                    { text: 'Deposition', zone: 'Removes Energy (Cooling)' }
                ]
            },
            digestionType: {
                zones: ['Mechanical Digestion', 'Chemical Digestion'],
                items: [
                    { text: 'Teeth chewing', zone: 'Mechanical Digestion' },
                    { text: 'Stomach churning', zone: 'Mechanical Digestion' },
                    { text: 'Tongue mixing', zone: 'Mechanical Digestion' },
                    { text: 'Saliva enzymes', zone: 'Chemical Digestion' },
                    { text: 'Stomach acid', zone: 'Chemical Digestion' },
                    { text: 'Intestine enzymes', zone: 'Chemical Digestion' }
                ]
            },
            matterProperties: {
                zones: ['Physical Properties', 'Chemical Properties'],
                items: [
                    { text: 'Color', zone: 'Physical Properties' },
                    { text: 'Shape', zone: 'Physical Properties' },
                    { text: 'Texture', zone: 'Physical Properties' },
                    { text: 'Flammability', zone: 'Chemical Properties' },
                    { text: 'Rusting', zone: 'Chemical Properties' },
                    { text: 'Reactivity', zone: 'Chemical Properties' }
                ]
            }
        };

        let currentSortingGame = 'muscleTypes';
        let sortedItems = {};

        function initSortingGame() {
            const games = Object.keys(sortingData);
            currentSortingGame = games[Math.floor(Math.random() * games.length)];
            const data = sortingData[currentSortingGame];
            sortedItems = {};
            
            const itemsContainer = document.getElementById('sortItems');
            itemsContainer.innerHTML = '';
            const shuffledItems = [...data.items].sort(() => Math.random() - 0.5);
            
            shuffledItems.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.style.cssText = 'padding: 15px 25px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 10px; cursor: pointer; font-weight: bold; transition: all 0.3s;';
                itemEl.textContent = item.text;
                itemEl.draggable = true;
                itemEl.dataset.zone = item.zone;
                itemEl.dataset.id = index;
                
                itemEl.ondragstart = (e) => {
                    e.dataTransfer.setData('text/plain', index);
                    itemEl.style.opacity = '0.5';
                };
                itemEl.ondragend = () => itemEl.style.opacity = '1';
                itemEl.onclick = () => selectSortItem(itemEl);
                
                itemsContainer.appendChild(itemEl);
            });
            
            const zonesContainer = document.getElementById('dropZones');
            zonesContainer.innerHTML = '';
            
            data.zones.forEach(zone => {
                const zoneEl = document.createElement('div');
                zoneEl.style.cssText = 'min-height: 150px; padding: 20px; background: rgba(102, 126, 234, 0.1); border: 3px dashed #667eea; border-radius: 15px; transition: all 0.3s;';
                zoneEl.innerHTML = '<h4 style="text-align: center; color: #667eea; margin-bottom: 15px;">' + zone + '</h4>';
                zoneEl.dataset.zone = zone;
                
                zoneEl.ondragover = (e) => {
                    e.preventDefault();
                    zoneEl.style.background = 'rgba(102, 126, 234, 0.3)';
                };
                zoneEl.ondragleave = () => zoneEl.style.background = 'rgba(102, 126, 234, 0.1)';
                zoneEl.ondrop = (e) => {
                    e.preventDefault();
                    zoneEl.style.background = 'rgba(102, 126, 234, 0.1)';
                    const itemId = e.dataTransfer.getData('text/plain');
                    const item = document.querySelector('[data-id="' + itemId + '"]');
                    if (item && item.parentElement.id === 'sortItems') {
                        zoneEl.appendChild(item);
                        sortedItems[itemId] = zone;
                        showCelebration('Sorted!');
                    }
                };
                zoneEl.onclick = () => dropInZone(zoneEl);
                
                zonesContainer.appendChild(zoneEl);
            });
        }

        let selectedSortItem = null;

        function selectSortItem(item) {
            if (selectedSortItem) {
                selectedSortItem.style.boxShadow = '';
            }
            selectedSortItem = item;
            item.style.boxShadow = '0 0 0 4px #ffd700';
        }

        function dropInZone(zone) {
            if (selectedSortItem && selectedSortItem.parentElement.id === 'sortItems') {
                zone.appendChild(selectedSortItem);
                sortedItems[selectedSortItem.dataset.id] = zone.dataset.zone;
                selectedSortItem.style.boxShadow = '';
                selectedSortItem = null;
                showCelebration('Sorted!');
            }
        }

        function checkSorting() {
            const data = sortingData[currentSortingGame];
            let correct = 0;
            
            document.querySelectorAll('#dropZones [data-id]').forEach(item => {
                const itemZone = item.dataset.zone;
                const parentZone = item.parentElement.dataset.zone;
                
                if (itemZone === parentZone) {
                    item.style.background = 'linear-gradient(135deg, #4caf50 0%, #81c784 100%)';
                    correct++;
                } else {
                    item.style.background = 'linear-gradient(135deg, #f44336 0%, #e57373 100%)';
                }
            });
            
            addXP(correct * 5);
            
            if (correct === data.items.length) {
                showCelebration('Perfect!');
                addXP(30);
                setTimeout(() => alert('Perfect! All ' + correct + ' items sorted correctly!'), 500);
            } else {
                alert('You got ' + correct + '/' + data.items.length + ' correct! Try again!');
            }
        }

        // Speed Round
        const speedQuestions = [
            { q: 'Arteries carry blood ___ from the heart', a: 'Away', options: ['Away', 'Back', 'Around', 'Through'] },
            { q: 'Veins have ___ to prevent backflow', a: 'Valves', options: ['Valves', 'Pumps', 'Filters', 'Muscles'] },
            { q: 'The heart is made of ___ muscle', a: 'Cardiac', options: ['Skeletal', 'Smooth', 'Cardiac', 'Voluntary'] },
            { q: 'Gas exchange happens in the ___', a: 'Alveoli', options: ['Trachea', 'Bronchi', 'Alveoli', 'Nose'] },
            { q: 'The diaphragm is the main ___ muscle', a: 'Breathing', options: ['Heart', 'Breathing', 'Digestive', 'Walking'] },
            { q: 'Solid to Liquid is called ___', a: 'Melting', options: ['Freezing', 'Melting', 'Evaporation', 'Condensation'] },
            { q: 'Heat transfer through direct touch is ___', a: 'Conduction', options: ['Conduction', 'Convection', 'Radiation', 'Insulation'] },
            { q: 'Hot air ___ because it is less dense', a: 'Rises', options: ['Rises', 'Sinks', 'Stays', 'Freezes'] },
            { q: 'Tendons connect ___ to bones', a: 'Muscles', options: ['Bones', 'Muscles', 'Skin', 'Nerves'] },
            { q: 'The brain has ___ billion neurons', a: '86', options: ['10', '50', '86', '100'] },
            { q: 'Water vapor cooling into droplets is ___', a: 'Condensation', options: ['Evaporation', 'Condensation', 'Precipitation', 'Collection'] },
            { q: 'Ligaments connect ___ to bones', a: 'Bones', options: ['Muscles', 'Bones', 'Tendons', 'Cartilage'] },
            { q: 'Smooth muscle works ___', a: 'Automatically', options: ['Voluntarily', 'Automatically', 'Never', 'Sometimes'] },
            { q: 'The Sun warms Earth through ___', a: 'Radiation', options: ['Conduction', 'Convection', 'Radiation', 'Contact'] },
            { q: 'You have about ___ bones', a: '206', options: ['106', '206', '306', '406'] },
            { q: 'Nutrients are absorbed in the ___ intestine', a: 'Small', options: ['Small', 'Large', 'Both', 'Neither'] },
            { q: 'The stomach breaks food with ___', a: 'Acid', options: ['Water', 'Acid', 'Air', 'Blood'] },
            { q: 'Food moves through esophagus by ___', a: 'Peristalsis', options: ['Gravity', 'Peristalsis', 'Breathing', 'Chewing'] },
            { q: 'The ___ controls balance and coordination', a: 'Cerebellum', options: ['Cerebrum', 'Cerebellum', 'Brain Stem', 'Spinal Cord'] },
            { q: 'The largest part of the brain is the ___', a: 'Cerebrum', options: ['Cerebrum', 'Cerebellum', 'Brain Stem', 'Nerves'] },
            { q: 'Matter is anything with mass and ___', a: 'Space', options: ['Color', 'Space', 'Weight', 'Energy'] },
            { q: 'The smallest unit of matter is an ___', a: 'Atom', options: ['Atom', 'Molecule', 'Cell', 'Element'] },
            { q: 'Two or more atoms bonded together form a ___', a: 'Molecule', options: ['Atom', 'Molecule', 'Element', 'Compound'] },
            { q: 'Color and shape are ___ properties', a: 'Physical', options: ['Physical', 'Chemical', 'Atomic', 'Molecular'] },
            { q: 'Flammability is a ___ property', a: 'Chemical', options: ['Physical', 'Chemical', 'Atomic', 'Molecular'] },
            { q: '___ helps conserve matter by reusing materials', a: 'Recycling', options: ['Burning', 'Recycling', 'Melting', 'Freezing'] }
        ];

        let speedTimer;
        let speedTimeLeft;
        let speedScore;
        let currentSpeedQuestion;

        function startSpeedRound() {
            speedTimeLeft = 30;
            speedScore = 0;
            document.getElementById('speedScore').textContent = 'Score: 0';
            document.getElementById('speedStartBtn').style.display = 'none';
            
            speedTimer = setInterval(() => {
                speedTimeLeft--;
                document.getElementById('speedTimer').textContent = speedTimeLeft;
                
                if (speedTimeLeft <= 0) {
                    endSpeedRound();
                }
            }, 1000);
            
            showNextSpeedQuestion();
        }

        function showNextSpeedQuestion() {
            const available = speedQuestions.filter((_, i) => i !== currentSpeedQuestion);
            const question = available[Math.floor(Math.random() * available.length)];
            currentSpeedQuestion = speedQuestions.indexOf(question);
            
            document.getElementById('speedQuestion').textContent = question.q;
            
            const optionsEl = document.getElementById('speedOptions');
            optionsEl.innerHTML = '';
            
            const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);
            shuffledOptions.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = opt;
                btn.onclick = () => checkSpeedAnswer(opt, question.a);
                optionsEl.appendChild(btn);
            });
        }

        function checkSpeedAnswer(selected, correct) {
            if (selected === correct) {
                speedScore++;
                document.getElementById('speedScore').textContent = 'Score: ' + speedScore;
                showCelebration('Correct!');
                addXP(5);
            } else {
                showCelebration('Wrong!');
            }
            showNextSpeedQuestion();
        }

        function endSpeedRound() {
            clearInterval(speedTimer);
            document.getElementById('speedTimer').textContent = '0';
            document.getElementById('speedQuestion').textContent = 'Time is up! Final Score: ' + speedScore;
            document.getElementById('speedOptions').innerHTML = '';
            document.getElementById('speedStartBtn').style.display = 'inline-block';
            document.getElementById('speedStartBtn').textContent = 'Play Again!';
            
            addXP(speedScore * 3);
            if (speedScore >= 10) {
                showCelebration('Amazing!');
            }
        }

        // Quiz System
        const quizQuestions = [
            { type: 'multiple', question: 'What type of muscle is the heart made of?', options: ['Skeletal muscle', 'Smooth muscle', 'Cardiac muscle', 'Voluntary muscle'], correct: 2 },
            { type: 'multiple', question: 'Which blood vessels carry blood AWAY from the heart?', options: ['Veins', 'Capillaries', 'Arteries', 'Valves'], correct: 2 },
            { type: 'tf', question: 'Veins have valves to prevent blood from flowing backwards.', correct: true },
            { type: 'multiple', question: 'Where does gas exchange (O2 and CO2) happen in the lungs?', options: ['Trachea', 'Bronchi', 'Alveoli', 'Diaphragm'], correct: 2 },
            { type: 'tf', question: 'The diaphragm relaxes (moves up) when you breathe IN.', correct: false },
            { type: 'multiple', question: 'What connects muscles to bones?', options: ['Ligaments', 'Tendons', 'Cartilage', 'Joints'], correct: 1 },
            { type: 'multiple', question: 'Which state change is Liquid to Gas?', options: ['Melting', 'Freezing', 'Evaporation', 'Condensation'], correct: 2 },
            { type: 'tf', question: 'In convection, hot fluids sink because they are more dense.', correct: false },
            { type: 'multiple', question: 'Heat from the Sun reaches Earth through:', options: ['Conduction', 'Convection', 'Radiation', 'Insulation'], correct: 2 },
            { type: 'multiple', question: 'In the water cycle, water vapor forming clouds is called:', options: ['Evaporation', 'Condensation', 'Precipitation', 'Collection'], correct: 1 },
            { type: 'multiple', question: 'Where does digestion BEGIN?', options: ['Stomach', 'Mouth', 'Small Intestine', 'Esophagus'], correct: 1 },
            { type: 'tf', question: 'The small intestine is where nutrients are absorbed into the blood.', correct: true },
            { type: 'multiple', question: 'What wave-like motion moves food through the esophagus?', options: ['Digestion', 'Absorption', 'Peristalsis', 'Circulation'], correct: 2 },
            { type: 'multiple', question: 'Which part of the brain controls balance and coordination?', options: ['Cerebrum', 'Cerebellum', 'Brain Stem', 'Spinal Cord'], correct: 1 },
            { type: 'tf', question: 'The brain stem controls automatic functions like breathing and heartbeat.', correct: true },
            { type: 'multiple', question: 'What is the definition of matter?', options: ['Anything with color', 'Anything with mass and takes up space', 'Only solid objects', 'Only things you can see'], correct: 1 },
            { type: 'multiple', question: 'What is the smallest unit of matter?', options: ['Molecule', 'Cell', 'Atom', 'Element'], correct: 2 },
            { type: 'tf', question: 'A molecule is two or more atoms bonded together.', correct: true },
            { type: 'multiple', question: 'Color, shape, and texture are examples of:', options: ['Chemical properties', 'Physical properties', 'Atomic properties', 'Energy properties'], correct: 1 },
            { type: 'tf', question: 'Flammability (ability to burn) is a chemical property.', correct: true },
            { type: 'multiple', question: 'Recycling helps conserve matter by:', options: ['Creating new atoms', 'Destroying old matter', 'Reusing materials', 'Burning waste'], correct: 2 },
            { type: 'multiple', question: 'Which sensory organ detects light and color?', options: ['Ears', 'Nose', 'Eyes', 'Tongue'], correct: 2 },
            { type: 'tf', question: 'The skin is the largest organ in the human body.', correct: true }
        ];

        let userAnswers = {};

        function initQuiz() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = '';
            userAnswers = {};
            document.getElementById('quizResults').style.display = 'none';
            document.getElementById('quizProgress').style.width = '0%';
            document.getElementById('quizProgress').textContent = '0%';
            
            quizQuestions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                
                let html = '<span class="question-number">Question ' + (index + 1) + '</span><div class="question-text">' + q.question + '</div>';
                
                if (q.type === 'multiple') {
                    html += '<div class="options">';
                    q.options.forEach((opt, optIndex) => {
                        html += '<div class="option" onclick="selectAnswer(' + index + ', ' + optIndex + ', this)">' + opt + '</div>';
                    });
                    html += '</div>';
                } else if (q.type === 'tf') {
                    html += '<div style="text-align: center;"><button class="true-false-btn true-btn" onclick="selectTF(' + index + ', true, this)">TRUE</button><button class="true-false-btn false-btn" onclick="selectTF(' + index + ', false, this)">FALSE</button></div>';
                }
                
                card.innerHTML = html;
                container.appendChild(card);
            });
        }

        function selectAnswer(questionIndex, optionIndex, element) {
            element.parentElement.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            userAnswers[questionIndex] = optionIndex;
            updateQuizProgress();
            showCelebration('Selected!');
        }

        function selectTF(questionIndex, answer, element) {
            element.parentElement.querySelectorAll('.true-false-btn').forEach(btn => btn.classList.remove('selected'));
            element.classList.add('selected');
            userAnswers[questionIndex] = answer;
            updateQuizProgress();
            showCelebration('Selected!');
        }

        function updateQuizProgress() {
            const answered = Object.keys(userAnswers).length;
            const total = quizQuestions.length;
            const percent = Math.round((answered / total) * 100);
            document.getElementById('quizProgress').style.width = percent + '%';
            document.getElementById('quizProgress').textContent = percent + '%';
        }

        function submitQuiz() {
            let correct = 0;
            
            quizQuestions.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = q.type === 'multiple' ? userAnswer === q.correct : userAnswer === q.correct;
                
                if (isCorrect) correct++;
                
                const card = document.querySelectorAll('.question-card')[index];
                if (q.type === 'multiple') {
                    card.querySelectorAll('.option').forEach((opt, optIndex) => {
                        if (optIndex === q.correct) {
                            opt.classList.add('correct');
                        } else if (optIndex === userAnswer && userAnswer !== q.correct) {
                            opt.classList.add('incorrect');
                        }
                    });
                }
            });
            
            const percent = Math.round((correct / quizQuestions.length) * 100);
            const resultsEl = document.getElementById('quizResults');
            resultsEl.style.display = 'block';
            
            let message = percent >= 80 ? 'Amazing work! You are a science star!' : percent >= 60 ? 'Good job! Keep studying!' : 'Keep practicing - you have got this!';
            let emoji = percent >= 80 ? 'TROPHY' : percent >= 60 ? 'STAR' : 'BOOK';
            
            resultsEl.innerHTML = '<div class="score-display"><div style="font-size: 1.5em; margin-bottom: 10px;">' + emoji + ' Quiz Complete!</div><div>You got ' + correct + '/' + quizQuestions.length + ' correct (' + percent + '%)</div><div style="font-size: 0.8em; margin-top: 10px;">' + message + '</div></div>';
            
            addXP(correct * 10);
            if (percent >= 80) {
                showCelebration('Amazing!');
                addXP(50);
            } else if (percent >= 60) {
                showCelebration('Good Job!');
            }
        }

        // Matter Lab
        let currentTemp = 25;

        function initMatterLab() {
            currentTemp = 25;
            updateMatterLab();
        }

        function changeTemp(delta) {
            currentTemp += delta;
            if (currentTemp < -50) currentTemp = -50;
            if (currentTemp > 150) currentTemp = 150;
            updateMatterLab();
            addXP(1);
        }

        function resetLab() {
            currentTemp = 25;
            updateMatterLab();
        }

        function updateMatterLab() {
            document.getElementById('tempValue').textContent = currentTemp;
            
            const display = document.getElementById('moleculeDisplay');
            display.innerHTML = '';
            
            let state, stateEmoji, explanation;
            
            if (currentTemp <= 0) {
                state = 'solid';
                stateEmoji = 'SOLID (Ice)';
                explanation = 'At ' + currentTemp + ' C, water is frozen solid! Molecules are locked in a crystal structure, vibrating in place but not moving around. They have LOW energy and are tightly packed together.';
            } else if (currentTemp < 100) {
                state = 'liquid';
                stateEmoji = 'LIQUID (Water)';
                explanation = 'At ' + currentTemp + ' C, water is a liquid. Molecules are close together but can slide past each other freely. They have MODERATE energy and take the shape of their container.';
            } else {
                state = 'gas';
                stateEmoji = 'GAS (Steam)';
                explanation = 'At ' + currentTemp + ' C, water is steam (gas)! Molecules are zooming around freely with HIGH energy. They spread out to fill all available space and move very fast!';
            }
            
            document.getElementById('stateLabel').textContent = stateEmoji;
            document.getElementById('labExplanation').textContent = explanation;
            
            const numMolecules = state === 'gas' ? 15 : state === 'liquid' ? 20 : 25;
            for (let i = 0; i < numMolecules; i++) {
                const molecule = document.createElement('div');
                molecule.className = 'molecule ' + state;
                if (state === 'gas') {
                    molecule.style.animationDelay = (Math.random() * 2) + 's';
                }
                display.appendChild(molecule);
            }
            
            const molecules = display.querySelectorAll('.molecule');
            molecules.forEach(m => {
                if (currentTemp <= 0) {
                    m.style.background = 'linear-gradient(135deg, #74b9ff, #0984e3)';
                } else if (currentTemp < 50) {
                    m.style.background = 'linear-gradient(135deg, #81ecec, #00cec9)';
                } else if (currentTemp < 100) {
                    m.style.background = 'linear-gradient(135deg, #ffeaa7, #fdcb6e)';
                } else {
                    m.style.background = 'linear-gradient(135deg, #ff7675, #d63031)';
                }
            });
        }

        // Water Cycle Info
        function showWaterInfo(stage) {
            const info = {
                evaporation: {
                    title: 'EVAPORATION',
                    text: 'The Sun heats water in oceans, lakes, and rivers. Water molecules gain energy and escape into the air as invisible water vapor. This is evaporation - liquid turning into gas! Plants also release water vapor through transpiration.'
                },
                condensation: {
                    title: 'CONDENSATION',
                    text: 'As water vapor rises, it cools down. Cool air cannot hold as much moisture, so water vapor condenses (turns back into tiny liquid droplets) around dust particles. Millions of these droplets form clouds!'
                },
                precipitation: {
                    title: 'PRECIPITATION',
                    text: 'Water droplets in clouds combine and grow larger. When they become too heavy, gravity pulls them down as precipitation - rain, snow, sleet, or hail depending on temperature!'
                },
                collection: {
                    title: 'COLLECTION',
                    text: 'Precipitation collects in oceans, lakes, rivers, and underground (groundwater). Some water is absorbed by plants, some flows into streams. Eventually, the Sun heats it again and the cycle continues!'
                }
            };
            
            const data = info[stage];
            document.getElementById('waterInfo').innerHTML = '<h4 style="margin-bottom: 15px; color: #667eea;">' + data.title + '</h4><p>' + data.text + '</p>';
            showCelebration(stage.toUpperCase());
            addXP(3);
        }

        // ============================================
        // IMPROVED HEAT TRANSFER DEMOS
        // ============================================
        
        let conductionRunning = false;
        let convectionRunning = false;
        let radiationRunning = false;
        let convectionInterval = null;
        let radiationInterval = null;

        function resetHeatDemos() {
            conductionRunning = false;
            convectionRunning = false;
            radiationRunning = false;
            if (convectionInterval) clearInterval(convectionInterval);
            if (radiationInterval) clearInterval(radiationInterval);
            
            document.getElementById('conductionStatus').textContent = 'Click to start demo!';
            document.getElementById('conductionStatus').style.color = '#667eea';
            document.getElementById('convectionStatus').textContent = 'Click to start demo!';
            document.getElementById('convectionStatus').style.color = '#667eea';
            document.getElementById('radiationStatus').textContent = 'Click to start demo!';
            document.getElementById('radiationStatus').style.color = '#667eea';
        }

        // CONDUCTION DEMO - Spoon heating up in soup
        function runConductionDemo() {
            if (conductionRunning) return;
            conductionRunning = true;
            
            const spoon = document.getElementById('conductionSpoon');
            const status = document.getElementById('conductionStatus');
            const heatDots = document.getElementById('conductionHeatDots');
            
            // Update explanation
            document.getElementById('heatExplanation').innerHTML = '<strong>CONDUCTION:</strong> Watch the spoon heat up! Heat transfers from the hot soup through DIRECT CONTACT. Molecules in the soup vibrate fast and bump into spoon molecules, passing energy along like dominoes! The spoon gradually gets hotter from the bottom up. Metals are excellent conductors of heat!';
            
            status.textContent = 'Heating the spoon...';
            status.style.color = '#e74c3c';
            status.style.background = '#ffe0e0';
            
            // Create heat dots that travel up the spoon
            heatDots.innerHTML = '';
            
            let heatLevel = 0;
            const heatInterval = setInterval(() => {
                heatLevel += 5;
                
                // Add a heat dot
                if (heatLevel % 10 === 0 && heatLevel <= 80) {
                    const dot = document.createElement('div');
                    dot.style.cssText = 'width: 8px; height: 8px; background: #ff5722; border-radius: 50%; display: inline-block; margin: 2px; animation: pulse 0.5s infinite;';
                    heatDots.appendChild(dot);
                }
                
                // Change spoon color gradually (using filter for glow effect)
                const glowIntensity = heatLevel / 100;
                spoon.style.filter = 'drop-shadow(0 0 ' + (glowIntensity * 15) + 'px rgba(255, 87, 34, ' + glowIntensity + '))';
                
                status.textContent = 'Heat spreading... ' + heatLevel + '%';
                
                if (heatLevel >= 100) {
                    clearInterval(heatInterval);
                    status.textContent = 'SPOON IS HOT! (Direct contact = Conduction)';
                    status.style.color = '#27ae60';
                    status.style.background = '#d5f5e3';
                    showCelebration('Conduction!');
                    addXP(5);
                    
                    // Reset after delay
                    setTimeout(() => {
                        spoon.style.filter = 'none';
                        heatDots.innerHTML = '';
                        status.textContent = 'Click to start demo!';
                        status.style.color = '#667eea';
                        status.style.background = '#f0f0f0';
                        conductionRunning = false;
                    }, 3000);
                }
            }, 150);
        }

        // CONVECTION DEMO - Hot water rising, cold water sinking
        function runConvectionDemo() {
            if (convectionRunning) return;
            convectionRunning = true;
            
            const flame = document.getElementById('convectionFlame');
            const particles = document.getElementById('convectionParticles');
            const arrowUp = document.getElementById('convectionArrowUp');
            const arrowDown = document.getElementById('convectionArrowDown');
            const status = document.getElementById('convectionStatus');
            
            // Update explanation
            document.getElementById('heatExplanation').innerHTML = '<strong>CONVECTION:</strong> Watch the water particles! The flame heats water at the bottom. Hot water becomes LESS DENSE and RISES (red particles going up). Meanwhile, cooler water at the top is MORE DENSE and SINKS (blue particles going down). This creates a circular flow called a convection current! This is how hot air balloons work - hot air rises!';
            
            status.textContent = 'Heating the water...';
            status.style.color = '#e74c3c';
            status.style.background = '#ffe0e0';
            
            // Activate flame
            flame.style.opacity = '1';
            flame.style.animation = 'pulse 0.3s infinite';
            
            // Show arrows after a moment
            setTimeout(() => {
                arrowUp.style.opacity = '1';
                arrowDown.style.opacity = '1';
            }, 800);
            
            // Create particles
            particles.innerHTML = '';
            const particleData = [];
            
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'convection-particle';
                const startLeft = 30 + (i % 4) * 25;
                const startBottom = i < 4 ? 70 : 110;
                particle.style.cssText = 'left: ' + startLeft + 'px; bottom: ' + startBottom + 'px; background: ' + (i < 4 ? '#e74c3c' : '#3498db') + ';';
                particles.appendChild(particle);
                particleData.push({ el: particle, phase: i < 4 ? 'rising' : 'sinking', pos: i < 4 ? 0 : 50 });
            }
            
            status.textContent = 'Convection current flowing!';
            
            // Animate convection current
            convectionInterval = setInterval(() => {
                particleData.forEach(p => {
                    p.pos += 3;
                    if (p.pos > 100) p.pos = 0;
                    
                    let bottom, color;
                    if (p.pos < 50) {
                        // Rising phase
                        bottom = 70 + p.pos;
                        color = '#e74c3c';
                    } else {
                        // Sinking phase
                        bottom = 120 - (p.pos - 50);
                        color = '#3498db';
                    }
                    
                    p.el.style.bottom = bottom + 'px';
                    p.el.style.background = color;
                });
            }, 80);
            
            // Stop after 6 seconds
            setTimeout(() => {
                clearInterval(convectionInterval);
                convectionInterval = null;
                flame.style.opacity = '0.3';
                flame.style.animation = 'none';
                arrowUp.style.opacity = '0';
                arrowDown.style.opacity = '0';
                particles.innerHTML = '';
                
                status.textContent = 'Convection complete! (Fluid flow = Convection)';
                status.style.color = '#27ae60';
                status.style.background = '#d5f5e3';
                showCelebration('Convection!');
                addXP(5);
                
                setTimeout(() => {
                    status.textContent = 'Click to start demo!';
                    status.style.color = '#667eea';
                    status.style.background = '#f0f0f0';
                    convectionRunning = false;
                }, 2500);
            }, 6000);
        }

        // RADIATION DEMO - Sun warming person through space
        function runRadiationDemo() {
            if (radiationRunning) return;
            radiationRunning = true;
            
            const sun = document.getElementById('radiationSun');
            const person = document.getElementById('radiationPerson');
            const wavesContainer = document.getElementById('radiationWavesContainer');
            const status = document.getElementById('radiationStatus');
            
            // Update explanation
            document.getElementById('heatExplanation').innerHTML = '<strong>RADIATION:</strong> Watch the heat waves travel through EMPTY SPACE! The Sun is 93 million miles away, but its radiation still warms Earth. No touching or fluid flow needed - heat travels as invisible electromagnetic waves! This is why you can feel warmth from a campfire even without touching it. Dark colors absorb more radiation than light colors.';
            
            status.textContent = 'Sun emitting radiation...';
            status.style.color = '#f39c12';
            status.style.background = '#fef9e7';
            
            // Make sun pulse
            sun.style.animation = 'pulse 0.4s infinite';
            sun.style.filter = 'drop-shadow(0 0 20px #f1c40f)';
            
            // Create waves
            wavesContainer.innerHTML = '';
            let waveCount = 0;
            
            radiationInterval = setInterval(() => {
                if (waveCount < 12) {
                    const wave = document.createElement('div');
                    wave.className = 'heat-wave';
                    wave.innerHTML = '~';
                    wave.style.cssText = 'position: absolute; left: 0; top: 50%; transform: translateY(-50%); font-size: 1.5em; color: #f1c40f; opacity: 1;';
                    wavesContainer.appendChild(wave);
                    
                    // Animate wave moving right
                    let wavePos = 0;
                    const waveMove = setInterval(() => {
                        wavePos += 8;
                        wave.style.left = wavePos + 'px';
                        wave.style.opacity = 1 - (wavePos / 150);
                        
                        if (wavePos >= 150) {
                            clearInterval(waveMove);
                            wave.remove();
                        }
                    }, 50);
                    
                    waveCount++;
                }
            }, 250);
            
            // Person reacts after waves reach
            setTimeout(() => {
                person.style.filter = 'drop-shadow(0 0 10px #e74c3c)';
                status.textContent = 'Feeling warm from radiation!';
            }, 2000);
            
            // Complete demo
            setTimeout(() => {
                clearInterval(radiationInterval);
                radiationInterval = null;
                sun.style.animation = 'none';
                sun.style.filter = 'none';
                person.style.filter = 'none';
                wavesContainer.innerHTML = '';
                
                status.textContent = 'Heat received! (Waves through space = Radiation)';
                status.style.color = '#27ae60';
                status.style.background = '#d5f5e3';
                showCelebration('Radiation!');
                addXP(5);
                
                setTimeout(() => {
                    status.textContent = 'Click to start demo!';
                    status.style.color = '#667eea';
                    status.style.background = '#f0f0f0';
                    radiationRunning = false;
                }, 2500);
            }, 5000);
        }

        // Add pulse animation for heat demos
        const style = document.createElement('style');
        style.textContent = '@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }';
        document.head.appendChild(style);

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            const savedXP = localStorage.getItem('scienceXP');
            if (savedXP) {
                totalXP = parseInt(savedXP);
                currentLevel = Math.floor(totalXP / xpPerLevel) + 1;
                document.getElementById('currentXP').textContent = totalXP;
                document.getElementById('currentLevel').textContent = currentLevel;
                document.getElementById('xpFill').style.width = (totalXP % xpPerLevel) + '%';
            }
        });

        // Save XP periodically
        setInterval(() => {
            localStorage.setItem('scienceXP', totalXP);
        }, 5000);
    </script>
</body>
</html>
